<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.forTicket.community.dao.CommunityDAO">
	<resultMap id="communityResult" type="CommunityVO">
		<result property="c_No" column="c_No" />
		<result property="order_No" column="order_No" />
		<result property="mem_id" column="mem_id" />
		<result property="c_title" column="c_title" />
		<result property="c_content" column="c_content" />
		<result property="c_date" column="c_date" />
	</resultMap>
	
	<!--회원 커뮤니티 페이지 -->
	<select id="u_commulist" resultMap="communityResult"  parameterType="java.util.HashMap">
		<![CDATA[
		select * from (
			select ROW_NUMBER() OVER (ORDER BY c_date DESC) as recNum, table1.*
			from (
				SELECT 
					order_No
					, mem_id
					, c_title
					, c_content
					, c_date
				FROM community
				order by c_date desc
			 	) as table1
				) as table2				
			where				
		recNum between (#{section}-1)*100+ (#{pageNum}-1)*10+1 and (#{section}-1)*100+(#{pageNum})*10		
		]]>      
	</select>
	
	<!--사업자 커뮤니티 페이지 -->
	<select id="b_commulist" resultMap="communityResult"  parameterType="java.util.HashMap">
		<![CDATA[
		select * from (
			select ROW_NUMBER() OVER (ORDER BY c_date DESC) as recNum, table1.*
			from (
				SELECT 
					order_No
					, mem_id
					, c_title
					, c_content
					, c_date
				FROM community
				order by c_date desc
			 	) as table1
				) as table2				
			where				
		recNum between (#{section}-1)*100+ (#{pageNum}-1)*10+1 and (#{section}-1)*100+(#{pageNum})*10		
		]]>      
	</select>
	
	<!-- 관리자 커뮤니티 페이지 -->
	<select id="a_commulist" resultMap="communityResult"  parameterType="java.util.HashMap">
		<![CDATA[
		select * from (
			select ROW_NUMBER() OVER (ORDER BY c_date DESC) as recNum, table1.*
			from (
				SELECT 
					order_No
					, mem_id
					, c_title
					, c_content
					, c_date
				FROM community
				order by c_date desc
			 	) as table1
				) as table2				
			where				
		recNum between (#{section}-1)*100+ (#{pageNum}-1)*10+1 and (#{section}-1)*100+(#{pageNum})*10		
		]]>      
	</select>
	

</mapper>